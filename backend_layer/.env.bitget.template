# =============================================================================
# BITGET EXCHANGE CONFIGURATION
# =============================================================================
# Add these to your .env file for Bitget trading integration

# API Credentials (Mark as SECRET in Coolify)
BITGET_API_KEY=your_bitget_api_key
BITGET_API_SECRET=your_bitget_api_secret
BITGET_SECRET_KEY=your_bitget_secret_key
BITGET_PASSPHRASE=your_bitget_passphrase

# =============================================================================
# SLTP MODE: Local Dynamic SLTP (Jan 2026)
# =============================================================================
# SLTP is handled LOCALLY by the embedded dynamic_sltp module.
# Set to 'local' to use the Graph's intelligent SLTP manager
# The dynamic_sltp system handles all exits with:
# - Volatility-adaptive stops and profits
# - Trailing stops with profit-locking
# - Anti-churn protection (60-minute refractory period)
# - Hard 8% maximum drawdown limit
SLTP_MODE=local

# =============================================================================
# SLTP PARAMETERS - RESEARCH-BACKED FOR CRYPTO
# =============================================================================
# Core parameters calibrated for HIGH-VOLATILITY CRYPTO (altcoin gainers)
# Based on: Backtesting research (5000+ trades), academic papers, pro systems

# ATR Multipliers (k = 2.5x for crypto vs 2.0x for equities)
SLTP_K=2.5
SLTP_GAMMA=0.30
SLTP_MIN_ATR_PCT=0.005

# Trailing Stop Coefficients
SLTP_K1=2.0
SLTP_K2=1.5
SLTP_FEE_RATE=0.001

# Chandelier Exit
SLTP_KC=3.0
SLTP_N_CHANDELIER=22

# Take Profit Levels (1.5R/3.0R/5.0R)
SLTP_K_INIT=1.5
SLTP_PARTIAL_LEVELS=1.5,3.0,5.0
SLTP_PARTIAL_FRACTIONS=0.33,0.33,0.34
SLTP_TIGHTEN_PCT=0.15

# Time-Based Exit
SLTP_T0_HOURS=48.0
SLTP_KT=0.5

# Warmup Period (30 min prevents premature exit on gainer spikes)
SLTP_WARMUP_MINUTES=30

# Anti-Churn Protection (CRITICAL)
SLTP_ENABLE_ANTI_CHURN=true
SLTP_ENTRY_PERSIST_BARS=3
SLTP_EXIT_VOTES=2
SLTP_BREACH_DEBOUNCE=3.0

# Refractory Period (60 MINUTES - prevents re-entry churn)
SLTP_REFRACTORY_MIN=60.0
SLTP_MIN_EV_MULT=2.5
SLTP_HIGH_CONF_BYPASS=0.90

# Volatility Regime
SLTP_MIN_VR=0.5
SLTP_MAX_VR=2.5

# =============================================================================
# HARD STOP & EMERGENCY EXITS
# =============================================================================
# HARD 8% STOP LOSS - NEVER EXCEEDED
# If position hits -8% from entry, EXIT IMMEDIATELY
SLTP_MAX_DRAWDOWN_PCT=0.08

# Emergency Profit Exit (25% unrealized = take it)
SLTP_EMERGENCY_TP_PCT=0.25

# Panic Dump Detection (10% drop in 10 min = immediate exit)
SLTP_PANIC_DUMP_PCT=0.10
SLTP_PANIC_DUMP_WINDOW=10

# Max Hold Time (7 days = force exit)
SLTP_MAX_HOLD_HOURS=168

# =============================================================================
# CANDLE-CLOSE FILTER (Wick Protection)
# =============================================================================
SLTP_REQUIRE_CANDLE_CLOSE=true
SLTP_CANDLE_TF=5

# Webhook Configuration
SLTP_WEBHOOK_ENDPOINT=/sltp-webhook
SLTP_WEBHOOK_SECRET=sltp-webhook-secret-2025
SLTP_WEBHOOK_DEDUP=300

# Monitoring
SLTP_MONITOR_INTERVAL=30

# System Flags
SLTP_ENABLED=true
SLTP_DEBUG_LOGS=false

# Cold Start Configuration
SLTP_COLD_START_ENABLED=true
SLTP_MIN_POSITION_VALUE=1.0

# Reconciliation Configuration
SLTP_RECONCILIATION_ENABLED=true
SLTP_RECONCILIATION_INTERVAL=300

# Time-Based Fallback SLTP (Safety net for stuck positions)
SLTP_FALLBACK_TIMEOUT_HOURS=8.0
SLTP_FALLBACK_SL_PCT=0.05
SLTP_FALLBACK_TP_PCT=0.05

# TP/SL Percentages (for manual orders if needed)
TP1_PERCENT=0.04        # 4% take profit
TP2_PERCENT=0.08        # 8% take profit  
SL_PERCENT=0.05         # 5% stop loss

# Order Splitting
ORDER_SPLIT_PCT=0.5     # 50/50 split ratio

# Limit Order Slippage
LIMIT_ORDER_SLIPPAGE_PCT=0.003  # 0.3% slippage for quick fill
